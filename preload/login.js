module.exports=function(){const{ipcRenderer:e}=require("electron"),n=require("./qrcode.js");return{onLogin:()=>{document.querySelectorAll(".header, .redflagbox, .footer").forEach(e=>{e.style.display="none"}),e.sendSync("isHeadless")&&(async()=>{const o=await new Promise(e=>{const n=new MutationObserver(()=>{const o=document.querySelector("#ddlogin-iframe");o&&(n.disconnect(),e(o.contentWindow))});n.observe(document.querySelector("#ddlogin"),{childList:!0})}),r=await new Promise(e=>{const n=setInterval(()=>{o.currentCode&&(e(o.currentCode),clearInterval(n))},1e3)}),t=new URL(o.GOTO).searchParams,c=t.get("appid"),i=t.get("redirect_uri"),s=`https://oapi.dingtalk.com/connect/qrcommit?showmenu=false&code=${r}&appid=${c}&redirect_uri=${encodeURIComponent(i)}`,d=await n.generatePromise(s,{small:!0});console.log(s),e.send("log",`\n请使用学习强国APP扫码登录:\n${d}\n`),e.send("log",`或者使用学习强国APP打开此链接:\n${s}\n`)})()},isLoggedIn:()=>document.cookie.includes("token=")}}();